# Vulnerability Notifications
Attempt to update npm packages marked by github as vulnerable
---

---
## 1) Program Procedure: Fix
Attempt to fix npm-packages.

- **Type**: procedure
---
### 1.1) Procedure Task: Verify Github Access via curl
Use a github access token to pull in notification data.

- **Type**: task
- **Parameters**: {cache: '3 hours'}
- **Dependencies**:
    - **Name**: [request](https://www.npmjs.com/package/request), **Version**: latest
---
### 1.2) Procedure Task: Verify Github Access via git
Test if the computer is authorized to push to github

- **Type**: task
- **Dependencies**:
    - **Name**: [shelljs](https://www.npmjs.com/package/shelljs), **Version**: latest
    - **Name**: [path](https://www.npmjs.com/package/path), **Version**: latest
    - **Name**: [fs](https://www.npmjs.com/package/fs), **Version**: latest
---
### 1.3) Procedure Task: Get Active Notifications
Get all active github notifications as JSON

- **Type**: task
---
#### 1.3.1) Task Action: Get github notifications
Connect to github using token and get JSON data

- **Type**: action
- **Dependencies**:
    - **Name**: [request](https://www.npmjs.com/package/request), **Version**: latest
---
#### 1.3.2) Task Action: Cleanup Notifications
Remove unimportant information from github response

- **Type**: action
---
### 1.4) Procedure Task: Select Vulnerable Repositories
Skip unrelated notifications

- **Type**: task
---
### 1.5) Procedure Task: Select Npm Repositories
Select repositories in npm format only

- **Type**: task
- **Dependencies**:
    - **Name**: [path](https://www.npmjs.com/package/path), **Version**: latest
    - **Name**: [fs](https://www.npmjs.com/package/fs), **Version**: latest
---
### 1.6) Procedure Task: Clone selected repositories via git
all updates are performed on the local system via standard utilities

- **Type**: task
- **Dependencies**:
    - **Name**: [shelljs](https://www.npmjs.com/package/shelljs), **Version**: latest
---
### 1.7) Procedure Task: Run npm update
Update NPM Package using npm-update

- **Type**: task
- **Dependencies**:
    - **Name**: [npm](https://www.npmjs.com/package/npm), **Version**: latest
    - **Name**: [path](https://www.npmjs.com/package/path), **Version**: latest
    - **Name**: [fs](https://www.npmjs.com/package/fs), **Version**: latest
---
### 1.8) Procedure Task: Update NPM License
Update license field

- **Type**: task
---
#### 1.8.1) Task Action: Set npm license
Apply new license to the license field in package.json

- **Type**: action
- **Parameters**: (license='GPLv3', bork: true)
- **Dependencies**:
    - **Name**: [npm](https://www.npmjs.com/package/npm), **Version**: latest
    - **Name**: [path](https://www.npmjs.com/package/path), **Version**: latest
    - **Name**: [fs](https://www.npmjs.com/package/fs), **Version**: latest
---
### 1.9) Procedure Task: Run standard npm update
Ensure all packages are up to date

- **Type**: task
- **Dependencies**:
    - **Name**: [npm](https://www.npmjs.com/package/npm), **Version**: latest
---
### 1.10) Procedure Task: Npm Audit and Fix
Perform NPM Audit using npm

- **Type**: task
- **Dependencies**:
    - **Name**: [npm](https://www.npmjs.com/package/npm), **Version**: latest
---
### 1.11) Procedure Task: Publish Package Update to npmjs
save data to npm

- **Type**: task
- **Dependencies**:
    - **Name**: [npm](https://www.npmjs.com/package/npm), **Version**: latest
---
### 1.12) Procedure Task: Publish Code Updates to github
save data to github

- **Type**: task
- **Dependencies**:
    - **Name**: [shelljs](https://www.npmjs.com/package/shelljs), **Version**: latest