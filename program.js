/* generated on Tue Jul 16 2019 08:10:47 GMT-0400 (Eastern Daylight Time) from /Users/meow/Development/vulnerability-notifications/program.txt
 
Program: Vulnerability Notifications - Attempt to update npm packages marked by github as vulnerable
Author: Fantasy UI - https://github.com/fantasyui-com
Keywords: fantasyui-com vulnerability notifications update npm packages

Procedure: Fix - Attempt to fix npm-packages.

  Task: Verify Github Access via curl - Use a github access token to pull in notification data.
  Task Modules: request

  Task: Verify Github Access via git - Test if the computer is authorized to push to github
  Task Modules: shelljs, path, fs

  Task: Get Active Notifications - Get all active github notifications as JSON

    Action: Get github notifications - Connect to github using token and get JSON data
    Action Modules: request

    Action: Cleanup Notifications - Remove unimportant information from github response

  Task: Select Vulnerable Repositories -  Skip unrelated notifications

  Task: Select Npm Repositories - Select repositories in npm format only
  Task Modules: path, fs

  Task: Clone selected repositories via git - all updates are performed on the local system via standard utilities
  Task Modules: shelljs

  Task: Run npm update - Update NPM Package using npm-update
  Task Modules: npm, path, fs

  Task: Update NPM License - Update license field

    Action: Set npm license - Apply new license to the license field in package.json
    Action Parameters: (license='GPLv3', bork: true)
    Action Modules: npm, path, fs
    Action Test: Expect the license field to be GPLv3 - {key:'license', expect:'GPLv3'}

  Task: Run standard npm update - Ensure all packages are up to date
  Task Modules: npm

  Task: Npm Audit and Fix - Perform NPM Audit using npm
  Task Modules: npm

  Task: Publish Package Update to npmjs - save data to npm
  Task Modules: npm

  Task: Publish Code Updates to github - save data to github
  Task Modules: shelljs

*/

const program = {
 "meta": {
  "name": "Vulnerability Notifications",
  "description": "Attempt to update npm packages marked by github as vulnerable",
  "author": "Fantasy UI - https://github.com/fantasyui-com",
  "keywords": [
   "fantasyui-com",
   "vulnerability",
   "notifications",
   "update",
   "npm",
   "packages"
  ]
 },
 "data": [
  {
   "meta": {
    "type": "procedure",
    "name": "Fix",
    "description": "Attempt to fix npm-packages."
   },
   "test": [],
   "data": [
    {
     "meta": {
      "type": "task",
      "name": "Verify Github Access via curl",
      "description": "Use a github access token to pull in notification data.",
      "modules": [
       "request"
      ]
     },
     "test": [],
     "data": []
    },
    {
     "meta": {
      "type": "task",
      "name": "Verify Github Access via git",
      "description": "Test if the computer is authorized to push to github",
      "modules": [
       "shelljs",
       "path",
       "fs"
      ]
     },
     "test": [],
     "data": []
    },
    {
     "meta": {
      "type": "task",
      "name": "Get Active Notifications",
      "description": "Get all active github notifications as JSON"
     },
     "test": [],
     "data": [
      {
       "meta": {
        "type": "action",
        "name": "Get github notifications",
        "description": "Connect to github using token and get JSON data",
        "modules": [
         "request"
        ]
       },
       "test": [],
       "data": []
      },
      {
       "meta": {
        "type": "action",
        "name": "Cleanup Notifications",
        "description": "Remove unimportant information from github response"
       },
       "test": [],
       "data": []
      }
     ]
    },
    {
     "meta": {
      "type": "task",
      "name": "Select Vulnerable Repositories",
      "description": "Skip unrelated notifications"
     },
     "test": [],
     "data": []
    },
    {
     "meta": {
      "type": "task",
      "name": "Select Npm Repositories",
      "description": "Select repositories in npm format only",
      "modules": [
       "path",
       "fs"
      ]
     },
     "test": [],
     "data": []
    },
    {
     "meta": {
      "type": "task",
      "name": "Clone selected repositories via git",
      "description": "all updates are performed on the local system via standard utilities",
      "modules": [
       "shelljs"
      ]
     },
     "test": [],
     "data": []
    },
    {
     "meta": {
      "type": "task",
      "name": "Run npm update",
      "description": "Update NPM Package using npm-update",
      "modules": [
       "npm",
       "path",
       "fs"
      ]
     },
     "test": [],
     "data": []
    },
    {
     "meta": {
      "type": "task",
      "name": "Update NPM License",
      "description": "Update license field"
     },
     "test": [],
     "data": [
      {
       "meta": {
        "type": "action",
        "name": "Set npm license",
        "description": "Apply new license to the license field in package.json",
        "parameters": "(license='GPLv3', bork: true)",
        "modules": [
         "npm",
         "path",
         "fs"
        ]
       },
       "test": [
        {
         "description": "Expect the license field to be GPLv3",
         "assertion": "{key:'license', expect:'GPLv3'}"
        }
       ],
       "data": []
      }
     ]
    },
    {
     "meta": {
      "type": "task",
      "name": "Run standard npm update",
      "description": "Ensure all packages are up to date",
      "modules": [
       "npm"
      ]
     },
     "test": [],
     "data": []
    },
    {
     "meta": {
      "type": "task",
      "name": "Npm Audit and Fix",
      "description": "Perform NPM Audit using npm",
      "modules": [
       "npm"
      ]
     },
     "test": [],
     "data": []
    },
    {
     "meta": {
      "type": "task",
      "name": "Publish Package Update to npmjs",
      "description": "save data to npm",
      "modules": [
       "npm"
      ]
     },
     "test": [],
     "data": []
    },
    {
     "meta": {
      "type": "task",
      "name": "Publish Code Updates to github",
      "description": "save data to github",
      "modules": [
       "shelljs"
      ]
     },
     "test": [],
     "data": []
    }
   ]
  }
 ]
};
module.exports = program;
