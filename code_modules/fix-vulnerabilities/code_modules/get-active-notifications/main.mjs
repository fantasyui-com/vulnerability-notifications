/*
 classification: PROCEDURE TASK
           name: Get Active Notifications
    description: Get all active github notifications as JSON
         author: Fantasy UI - https://github.com/fantasyui-com

*/

// Load Modules
import {inspect} from 'util';
import getGithubNotifications from './code_modules/get-github-notifications';
import cleanupNotifications from './code_modules/cleanup-notifications';

// Example interface

export default async function main({ context, setup, input }) {

  const debug = true;

  if(debug) console.log('Input for: Get Active Notifications - Get all active github notifications as JSON')
  if(debug) console.log(inspect(input,false,2,true))

  // Prepare the outout object
  const output = {
    someList:[],
  };

  // TODO: customize this to match your code
  for (const element of input.someList||[1]) {
      // Get github notifications: Connect to github using token and get JSON data
      if(debug) console.log('Calling getGithubNotifications')
      const getGithubNotificationsData = await getGithubNotifications(input);
      if(debug) console.log(inspect(getGithubNotificationsData));
      // Cleanup Notifications: Remove unimportant information from github response
      if(debug) console.log('Calling cleanupNotifications')
      const cleanupNotificationsData = await cleanupNotifications(input);
      if(debug) console.log(inspect(cleanupNotificationsData));
  }

  return output;

};
